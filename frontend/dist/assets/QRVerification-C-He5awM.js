import{l as A,j as e,a1 as V,r as c,B as t,C as D,A as a,T as s}from"./index-CQi3PHFX.js";import{c as j,L as S}from"./documentUtils-bJFE2WUb.js";import{u as I}from"./useTheme-BwfxRj1I.js";import{V as R,C as T}from"./VerifiedUser-BgCez8zf.js";import{C as x}from"./Card-ZxPpsMTE.js";import{C as m}from"./CardContent-LfaozUcB.js";import{D as W}from"./Divider-dYpdDvre.js";import"./documentDatabase-BelqUvD4.js";import"./firebaseService-Bo3vlP6-.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./dividerClasses-DtBGEAXD.js";const k=A(e.jsx("path",{d:"M12 6c1.11 0 2-.9 2-2 0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2m4.6 9.99-1.07-1.07-1.08 1.07c-1.3 1.3-3.58 1.31-4.89 0l-1.07-1.07-1.09 1.07C6.75 16.64 5.88 17 4.96 17c-.73 0-1.4-.23-1.96-.61V21c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-4.61c-.56.38-1.23.61-1.96.61-.92 0-1.79-.36-2.44-1.01M18 9h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v1.54c0 1.08.88 1.96 1.96 1.96.52 0 1.02-.2 1.38-.57l2.14-2.13 2.13 2.13c.74.74 2.03.74 2.77 0l2.14-2.13 2.13 2.13c.37.37.86.57 1.38.57 1.08 0 1.96-.88 1.96-1.96V12C21 10.34 19.66 9 18 9"}),"Cake"),O=()=>{const f=I().palette.mode==="dark",[h]=V(),[r,p]=c.useState(null),[y,n]=c.useState(!0),[u,d]=c.useState("");c.useEffect(()=>{(()=>{try{n(!0);const i=h.get("data");if(!i){d("No verification data found"),n(!1);return}const g=JSON.parse(decodeURIComponent(i));if(!g.docType){d("Invalid QR Code: Data discrepancy detected."),n(!1);return}p(g)}catch{d("Invalid QR Code: The code is improperly formatted.")}finally{n(!1)}})()},[h]);const b=()=>{if(!r.age)return null;const i=j(r.age)>=18;return e.jsx(x,{elevation:3,sx:{mb:2},children:e.jsxs(m,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(k,{sx:{mr:1,color:"primary.main"}}),e.jsx(s,{variant:"h6",children:"Age Verification"})]}),e.jsxs(s,{variant:"body2",color:"text.secondary",sx:{color:i?"success.main":"error.main",fontWeight:"bold"},children:["Status: ",e.jsx("strong",{children:i?"✓ User is above 18 and verified":"✗ User is below 18"})]})]})})},C=()=>r.address?e.jsx(x,{elevation:3,sx:{mb:2},children:e.jsxs(m,{children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(S,{sx:{mr:1,color:"primary.main"}}),e.jsx(s,{variant:"h6",children:"Address Verification"})]}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(T,{sx:{color:"success.main",mr:1}}),e.jsx(s,{variant:"body1",children:"✅ Verified"})]}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Address:"}),e.jsx(s,{variant:"body1",sx:{p:2,backgroundColor:f?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.03)",borderRadius:2,fontFamily:"monospace",border:`1px solid ${f?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}`},children:r.address})]})}):null;let l=null;r&&r.age&&(l=j(r.age)>=18?"verified":"not_verified");let o=null;return r&&(r.address?o="verified":o="not_verified"),y?e.jsx(t,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsx(D,{})}):u?e.jsx(t,{sx:{maxWidth:600,mx:"auto",p:3},children:e.jsx(a,{severity:"error",children:u})}):e.jsxs(t,{sx:{maxWidth:800,mx:"auto",p:3},children:[l==="verified"&&e.jsx(a,{severity:"success",sx:{mb:1,fontWeight:600,fontSize:"1.1rem"},children:"Age verified!"}),l==="not_verified"&&e.jsx(a,{severity:"error",sx:{mb:1,fontWeight:600,fontSize:"1.1rem"},children:"Age not verified"}),o==="verified"&&e.jsx(a,{severity:"success",sx:{mb:3,fontWeight:600,fontSize:"1.1rem"},children:"Address verified!"}),o==="not_verified"&&e.jsx(a,{severity:"error",sx:{mb:3,fontWeight:600,fontSize:"1.1rem"},children:"Address not verified"}),e.jsxs(s,{variant:"h4",gutterBottom:!0,align:"center",sx:{mb:4},children:[e.jsx(R,{sx:{mr:1,verticalAlign:"middle"}}),"Verification Results"]}),e.jsx(x,{elevation:3,sx:{mb:3},children:e.jsxs(m,{children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Document Information"}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Document Type: ",e.jsx("strong",{children:r.docType||"N/A"})]}),r.username&&e.jsxs(s,{variant:"body2",color:"text.secondary",children:["User: ",e.jsx("strong",{children:r.username})]}),e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Verified At: ",e.jsx("strong",{children:new Date(r.verifiedAt).toLocaleString()})]})]})}),e.jsx(W,{sx:{my:3}}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Verification Details"}),b(),C(),!r.age&&!r.address&&e.jsx(a,{severity:"info",children:"No verification attributes found in the QR code."})]})};export{O as default};
